<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KING Store Ultimate</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
<link rel="stylesheet" href="style.css">

<style>
body { background:#f8fafc; }

.menu-card {
    background:white;
    border-radius:20px;
    overflow:hidden;
    box-shadow:0 4px 20px rgba(0,0,0,0.05);
    transition:.3s;
}
.menu-card:hover {
    transform:translateY(-6px);
    box-shadow:0 10px 30px rgba(0,0,0,0.1);
}

.menu-image {
    width:100%;
    height:180px;
    object-fit:cover;
    opacity:0;
    transition:.4s;
}
.menu-image.loaded { opacity:1; }

.skeleton {
    background:linear-gradient(90deg,#eee 25%,#ddd 50%,#eee 75%);
    background-size:200% 100%;
    animation: shimmer 1.5s infinite;
}
@keyframes shimmer {
    0%{background-position:-200% 0;}
    100%{background-position:200% 0;}
}


.prompt-chip {
    border: 1px solid #e5e7eb;
    background: #f9fafb;
    border-radius: 999px;
    padding: 6px 12px;
    font-size: 12px;
}
.prompt-chip:hover { background: #f3f4f6; }

.menu-lock-overlay {
    position: absolute;
    inset: 0;
    background: rgba(248, 250, 252, 0.9);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10;
}

.menu-lock-overlay.active { display: flex; }

</style>
</head>

<body class="min-h-screen">

<div class="bg-white shadow-sm sticky top-0 z-50">
<div class="max-w-6xl mx-auto flex justify-between items-center p-4">
<h1 class="text-xl font-bold">ðŸ‘‘ KING Store</h1>
<div class="flex gap-2">
<button onclick="switchView('buyer')" class="px-4 py-2 bg-black text-white rounded-xl text-sm">Buyer</button>
<button onclick="switchView('seller')" class="px-4 py-2 bg-gray-200 rounded-xl text-sm">Seller</button>
</div>
</div>
</div>

<div id="buyer-view" class="max-w-6xl mx-auto p-5">
<div id="category-container" class="flex gap-2 overflow-x-auto pb-4 mb-4 no-scrollbar"></div>

<div class="mb-4">
<input id="searchInput" type="text" placeholder="Search food..."
class="w-full p-3 border rounded-xl"
oninput="searchMenu()">
</div>

<div id="quick-assistant" class="bg-white rounded-2xl shadow-sm border p-4 mb-6">
<div class="flex items-center gap-2 mb-2">
<span>ðŸ’¬</span>
<h3 class="font-bold">Quick Assistant</h3>
</div>
<p id="prompt-required-msg" class="text-sm text-gray-600 mb-3">Please tell us what you want to order first.</p>
<div id="quick-prompt-chips" class="flex flex-wrap gap-2 mb-3"></div>
<div class="flex gap-2">
<input id="promptInput" type="text" placeholder="e.g. Spicy under 50k"
class="flex-1 p-3 border rounded-xl"
onkeydown="if(event.key==='Enter'){submitPrompt();}">
<button onclick="submitPrompt()" class="bg-black text-white px-4 rounded-xl">Send</button>
</div>
</div>

<div id="menu-area" class="relative">
<div id="menu-lock" class="menu-lock-overlay rounded-2xl">
<div class="bg-white p-4 rounded-xl shadow text-center text-sm">
Please tell us what you want to order first.
</div>
</div>
<div id="menu-container" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
</div>

<div class="fixed bottom-6 right-6">
<button onclick="toggleCart()" class="bg-black text-white px-5 py-3 rounded-full shadow-lg">
ðŸ›’ <span id="cart-count">0</span>
</button>
</div>

<div id="cart-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
<div class="bg-white w-96 p-6 rounded-2xl">
<h2 class="font-bold mb-4">Your Cart</h2>
<div id="cart-items"></div>
<div class="mt-4 font-bold">Total: Rp <span id="cart-total">0</span></div>
<button onclick="checkout()" class="mt-4 w-full bg-black text-white py-2 rounded-xl">Checkout</button>
<button onclick="toggleCart()" class="mt-2 w-full bg-gray-200 py-2 rounded-xl">Close</button>
</div>
</div>
</div>

<div id="seller-view" class="hidden max-w-5xl mx-auto p-6">
<h2 class="text-xl font-bold mb-4">Incoming Orders</h2>
<div id="orders-list"></div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script src="script.js"></script>
</body>
</html>
